<!DOCTYPE HTML>
<html lang="es" data-theme="light">
<head>
  <meta charset="utf-8" />
  <title>Recursos ‚Äì Sanaci√≥n & Narcisismo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Herramientas gratuitas: checklist de banderas rojas, generador de l√≠mites, contador de d√≠as y respiraci√≥n guiada.">
  <link rel="canonical" href="https://bjpages.github.io/sanandoando/recursos/">
  <link rel="stylesheet" href="../assets/css/main.css" />
  <noscript><link rel="stylesheet" href="../assets/css/noscript.css" /></noscript>
  <style>
    :root{
      --bg:#ffffff; --card:#ffffff; --text:#1c1d26; --muted:#666; --line:#eee;
      --btn:#f9f9fb; --btn-border:#ddd; --accent:#1c1d26; --pill:#f4f6f8; --pill-border:#e5e5e5; --ok:#00c170; --link:#1b8cff;
    }
    html[data-theme="dark"]{
      --bg:#0f1115; --card:#12141a; --text:#e9ecf1; --muted:#a0a6b0; --line:#1f232b;
      --btn:#151922; --btn-border:#242a34; --accent:#e9ecf1; --pill:#19202a; --pill-border:#243042; --ok:#1fd39f; --link:#72b7ff;
    }
    body{ background:var(--bg); color:var(--text); }

    /* Tabs */
    .tabs { display:flex; gap:8px; flex-wrap:wrap; margin: 0 0 12px; }
    .tab-btn { border:1px solid var(--btn-border); background:var(--btn); border-radius:10px; cursor:pointer; }
    .tab-btn.active { background:var(--accent); color:#fff !important; border-color:var(--accent); }
    .tab-panel { display:none; }
    .tab-panel.active { display:block; }

    /* Cards y controles */
    .tool-card{ background:var(--card); border:1px solid var(--line); border-radius:14px; padding:16px; margin:14px 0; box-shadow:0 8px 20px rgba(0,0,0,.03); }
    .tool-title{ margin-top:0; }
    .pill{ display:inline-block; padding:.25rem .6rem; border-radius:999px; border:1px solid var(--pill-border); font-size:.85rem; color:var(--text); background:var(--pill); }
    .row2{ display:grid; grid-template-columns:1fr 1fr; gap:16px; }
    @media(max-width:800px){ .row2{ grid-template-columns:1fr; } }
    .small{ font-size:.9rem; color:var(--muted); }
    .muted{ color:var(--muted); }
    .inline-controls > *{ margin-right:8px; margin-bottom:8px; }
    .btn{ display:inline-block; border-radius:10px; border:1px solid var(--btn-border); background:var(--btn); cursor:pointer;}
    .btn.primary{ background:var(--accent); color:#fff; border-color:var(--accent); }
    .btn.ghost{ background:transparent; }
    .copy-ok{ color:var(--ok); font-weight:700; margin-left:8px; display:none; }
    a{ color:var(--link); }

    /* Checklist */
    .table{ width:100%; border-collapse:collapse; }
    .table th, .table td{ border-bottom:1px solid var(--line); padding:.5rem; text-align:left; }
    .meter{ height:10px; background:var(--line); border-radius:999px; overflow:hidden; }
    .meter > span{ display:block; height:100%; width:0%; background:linear-gradient(90deg,#00c170,#ffb800,#ff5f5f); transition:width .25s ease; }

    /* Breath */
    .box-wrap{ display:flex; justify-content:center; align-items:center; height:220px; }
    .box{ width:120px; height:120px; border:2px solid var(--accent); border-radius:14px; display:flex; align-items:center; justify-content:center; font-weight:700; }
    .phase{ margin-top:10px; text-align:center; font-weight:600; }

    .kudos{ display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
    .badge{ padding:.2rem .5rem; background:#f2f7ff; border:1px solid #dfe8ff; border-radius:999px; font-size:.8rem; color:#355; }
    html[data-theme="dark"] .badge{ background:#0c223a; border-color:#183a61; color:#cfe2ff; }

    /* Impresi√≥n: solo el objetivo marcado como print-target */
    @media print{
      body * { visibility:hidden !important; }
      .print-target, .print-target * { visibility:visible !important; }
      .print-target { position:relative !important; }
    }
  </style>
  <style>
  /* Forzar que los checkboxes sean clicables/visibles pese a los estilos del tema */
  input[type="checkbox"]{
    -webkit-appearance: checkbox !important;
    appearance: checkbox !important;
    position: static !important;
    opacity: 1 !important;
    display: inline-block !important;
    width: 18px; height: 18px;
    cursor: pointer;
    vertical-align: middle;
  }
  /* Para que toda la fila responda al click (opcional pero c√≥modo) */
  .flag-row{ cursor: pointer; }
</style>

</head>
<body class="is-preload">
  <!-- Header global -->
  <div id="site-header"></div>

  <section id="header">
    <div class="inner">
      <h1>Recursos gratuitos</h1>
      <p>Herramientas pr√°cticas para tu proceso, hechas para usarse aqu√≠ mismo.</p>
      <div class="pill">Funciona offline</div>
      <div class="pill">Guarda progreso local</div>
      <div class="inline-controls" style="margin-top:10px">
        <button id="theme-toggle" class="btn">üåó Modo oscuro</button>
      </div>
    </div>
  </section>

  <section id="one" class="main style1">
    <div class="container">
      <!-- Tabs -->
      <div class="tabs" role="tablist" aria-label="Herramientas">
        <button class="tab-btn active" data-tab="tab-flags" role="tab" aria-selected="true">‚úÖ Checklist</button>
        <button class="tab-btn" data-tab="tab-boundaries" role="tab">üõ°Ô∏è L√≠mites</button>
        <button class="tab-btn" data-tab="tab-streak" role="tab">üìÖ D√≠as</button>
        <button class="tab-btn" data-tab="tab-breathe" role="tab">üå¨Ô∏è Respiraci√≥n</button>
      </div>

      <!-- Panel: Checklist -->
      <div id="tab-flags" class="tab-panel active" role="tabpanel">
        <div class="tool-card" id="tool-flags">
          <h2 class="tool-title">Checklist de banderas rojas</h2>
          <p class="muted">Marca se√±ales que hayas notado. El indicador se actualiza autom√°ticamente. <span class="small">Tu selecci√≥n se guarda en este navegador.</span></p>
          <div class="row2">
            <div>
              <table class="table">
                <thead><tr><th>Se√±al</th><th>¬øLa has visto?</th></tr></thead>
                <tbody id="flags-body"></tbody>
              </table>
            </div>
            <div>
              <p><strong>Indicador de riesgo</strong></p>
              <div class="meter"><span id="flags-meter"></span></div>
              <p id="flags-score" class="small" style="margin-top:.5rem">0 de 0 marcadas</p>
              <p id="flags-hint" class="muted"></p>
              <div class="inline-controls" style="margin-top:.5rem">
                <button class="btn ghost" id="flags-clear">Limpiar</button>
                <button class="btn" id="flags-print">Imprimir / Guardar PDF</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Panel: L√≠mites -->
      <div id="tab-boundaries" class="tab-panel" role="tabpanel">
        <div class="tool-card" id="tool-boundaries">
          <h2 class="tool-title">Generador de l√≠mites (frase lista para copiar)</h2>
          <div class="inline-controls">
            <label>Situaci√≥n:
              <select id="b-situation">
                <option value="tono">Cuando el tono se vuelve despectivo</option>
                <option value="mensajes">Mensajes fuera de horario</option>
                <option value="invade">Invasi√≥n de privacidad</option>
                <option value="promesas">Promesas incumplidas repetidas</option>
              </select>
            </label>
            <label>Tono:
              <select id="b-tone">
                <option value="neutral">Neutral y claro</option>
                <option value="firme">Firme</option>
                <option value="empatico">Emp√°tico</option>
              </select>
            </label>
            <button class="btn" id="b-generate">Generar</button>
          </div>
          <p class="small muted" style="margin:.5rem 0 0">Tip: un l√≠mite es observable y medible (qu√© har√°s si se cruza).</p>
          <textarea id="b-output" rows="4" style="width:100%;margin-top:.75rem" placeholder="Aqu√≠ aparecer√° tu l√≠mite..."></textarea>
          <div style="margin-top:.5rem" class="inline-controls">
            <button class="btn primary" id="b-copy">Copiar</button>
            <button class="btn" id="b-print">Imprimir / Guardar PDF</button>
            <span id="b-copied" class="copy-ok">¬°Copiado!</span>
          </div>
        </div>
      </div>

      <!-- Panel: D√≠as -->
      <div id="tab-streak" class="tab-panel" role="tabpanel">
        <div class="tool-card" id="tool-streak">
          <h2 class="tool-title">Contador de d√≠as (No-Contact / h√°bito)</h2>
          <div class="inline-controls">
            <label>Fecha de inicio: <input type="date" id="s-start"></label>
            <button class="btn" id="s-save">Guardar</button>
            <button class="btn ghost" id="s-reset">Reiniciar</button>
            <button class="btn" id="s-print">Imprimir progreso</button>
          </div>
          <p style="margin-top:.5rem">Llevas <strong id="s-days">0</strong> d√≠a(s). <span id="s-phrase" class="muted"></span></p>
          <div class="kudos" id="s-kudos"></div>
        </div>
      </div>

      <!-- Panel: Respiraci√≥n -->
      <div id="tab-breathe" class="tab-panel" role="tabpanel">
        <div class="tool-card" id="tool-breathe">
          <h2 class="tool-title">Respiraci√≥n 4-4-4 (box breathing)</h2>
          <div class="box-wrap">
            <div class="box" id="br-box">4</div>
          </div>
          <div class="phase" id="br-phase">Inhala</div>
          <div style="text-align:center;margin-top:.5rem">
            <button class="btn primary" id="br-start">Iniciar</button>
            <button class="btn ghost" id="br-stop">Detener</button>
          </div>
          <p class="small muted" style="text-align:center;margin-top:.5rem">Ciclo: 4s Inhala ¬∑ 4s Mant√©n ¬∑ 4s Exhala. Repite 3‚Äì5 minutos.</p>
        </div>
      </div>

    </div>
  </section>

  <div id="site-footer"></div>

  <!-- Scripts plantilla -->
  <script src="../assets/js/jquery.min.js"></script>
  <script src="../assets/js/jquery.scrolly.min.js"></script>
  <script src="../assets/js/browser.min.js"></script>
  <script src="../assets/js/breakpoints.min.js"></script>
  <script src="../assets/js/util.js"></script>
  <script src="../assets/js/main.js"></script>

  <!-- Header / Footer globales -->
  <script src="../assets/js/header.js" data-base="/sanandoando/"></script>
  <script src="../assets/js/footer.js"
          data-base="/sanandoando/"
          data-facebook="https://www.facebook.com/sanando.ando.ya"></script>

  <script>
    // ====== Tabs ======
    (function(){
      var btns = document.querySelectorAll('.tab-btn');
      var panels = document.querySelectorAll('.tab-panel');
      function activate(id){
        btns.forEach(b=>b.classList.toggle('active', b.getAttribute('data-tab')===id));
        panels.forEach(p=>p.classList.toggle('active', p.id===id));
      }
      btns.forEach(b=>{
        b.addEventListener('click', ()=>activate(b.getAttribute('data-tab')));
      });
      // hash deep-link (#tab=tab-flags)
      var hash = (location.hash||'').replace('#tab=','');
      if (hash && document.getElementById(hash)) activate(hash);
    })();

    // ====== Tema ======
    (function(){
      var html = document.documentElement, key='sa_theme';
      function apply(t){ html.setAttribute('data-theme', t); }
      var saved = localStorage.getItem(key); if(saved) apply(saved);
      var btn = document.getElementById('theme-toggle');
      btn.addEventListener('click', function(){
        var cur = html.getAttribute('data-theme')||'light';
        var next = cur==='light'?'dark':'light';
        apply(next); localStorage.setItem(key,next);
      });
      btn.textContent = (html.getAttribute('data-theme')==='dark'?'üåû Modo claro':'üåó Modo oscuro');
      new MutationObserver(function(){
        btn.textContent = (html.getAttribute('data-theme')==='dark'?'üåû Modo claro':'üåó Modo oscuro');
      }).observe(document.documentElement,{attributes:true,attributeFilter:['data-theme']});
    })();

    // ====== PRINT helper: imprime SOLO un nodo ======
    function printOnly(node){
      // Marca el nodo como objetivo de impresi√≥n
      node.classList.add('print-target');
      // Fuerza relayout y dispara impresi√≥n
      setTimeout(function(){
        window.print();
        // Limpia marca despu√©s
        setTimeout(function(){ node.classList.remove('print-target'); }, 200);
      }, 50);
    }

    // ---------- 1) CHECKLIST ----------
    (function(){
      var FLAGS = [
        "Minimiza o ridiculiza tus emociones",
        "Cambia versiones de los hechos (gaslighting)",
        "Te a√≠sla de amistades o familia",
        "Cruza l√≠mites que ya comunicaste",
        "Promete cambiar sin evidencia de cambio",
        "Controla tu tiempo, dinero o decisiones",
        "Usa sarcasmo/desprecio como ‚Äúbroma‚Äù",
        "Vive en modo v√≠ctima para evitar responsabilidad",
        "Invade tu privacidad (tel√©fono, redes, mail)",
        "Presiona para respuestas inmediatas a cualquier hora"
      ];
      var key = "sa_flags";
      var saved = JSON.parse(localStorage.getItem(key) || "[]");
      var body = document.getElementById('flags-body');
      var meter = document.getElementById('flags-meter');
      var score = document.getElementById('flags-score');
      var hint  = document.getElementById('flags-hint');
      var card  = document.getElementById('tool-flags');

      function render(){
        body.innerHTML = "";
        FLAGS.forEach(function(txt, i){
          var tr = document.createElement('tr');
          tr.className = 'flag-row';
          
          var td1 = document.createElement('td'); td1.textContent = txt;
          var td2 = document.createElement('td');
          var cb = document.createElement('input'); cb.type='checkbox'; cb.checked = saved.indexOf(i)>-1;
          cb.addEventListener('change', function(){
            var idx = saved.indexOf(i);
            if (cb.checked && idx===-1) saved.push(i);
            if (!cb.checked && idx>-1) saved.splice(idx,1);
            localStorage.setItem(key, JSON.stringify(saved));
            updateMeter();
          });
          td2.appendChild(cb);
          tr.appendChild(td1); tr.appendChild(td2);

          tr.addEventListener('click', function(){              // ‚úÖ click en la fila alterna el valor
            cb.checked = !cb.checked;
            cb.dispatchEvent(new Event('change'));
          });
          
          body.appendChild(tr);
        });
        updateMeter();
      }
      function updateMeter(){
        var pct = Math.round((saved.length / FLAGS.length) * 100);
        meter.style.width = pct + '%';
        score.textContent = saved.length + ' de ' + FLAGS.length + ' marcadas';
        if (pct <= 25)      hint.textContent = "Riesgo bajo: sigue atento a los patrones.";
        else if (pct <= 50) hint.textContent = "Riesgo moderado: considera l√≠mites claros y apoyo externo.";
        else if (pct <= 75) hint.textContent = "Riesgo alto: prioriza tu seguridad emocional y busca orientaci√≥n.";
        else                hint.textContent = "Riesgo muy alto: considera plan de salida y apoyo profesional.";
      }
      document.getElementById('flags-clear').addEventListener('click', function(){
        saved = []; localStorage.setItem(key, "[]"); render();
      });
      document.getElementById('flags-print').addEventListener('click', function(){
        // Para impresi√≥n: a√±adimos lista marcada al final temporalmente
        var list = document.createElement('div');
        var selected = saved.map(function(i){ return FLAGS[i]; });
        list.innerHTML = '<h3>Checklist (resumen)</h3>' + (selected.length
          ? '<ul>'+selected.map(function(t){return '<li>'+t+'</li>';}).join('')+'</ul>'
          : '<p>(Sin elementos marcados)</p>');
        card.appendChild(list);
        printOnly(card);
        setTimeout(function(){ card.removeChild(list); }, 300);
      });
      render();
    })();

    // ---------- 2) L√çMITES ----------
    (function(){
      var TEMPLATES = {
        tono: {
          neutral:  "Cuando el tono se vuelve despectivo, me retiro de la conversaci√≥n. Podemos seguir cuando el trato sea respetuoso.",
          firme:    "No tolerar√© un tono despectivo. Si sucede, terminar√© la conversaci√≥n y retomar√© cuando podamos hablar con respeto.",
          empatico: "Me afecta cuando el tono suena despectivo. Para cuidarme, pausar√© la conversaci√≥n y la retomamos con respeto."
        },
        mensajes: {
          neutral:  "No respondo mensajes despu√©s de las 22:00. Si escribes en ese horario, te contestar√© al d√≠a siguiente.",
          firme:    "No contestar√© mensajes fuera de horario. Si llegan, responder√© al d√≠a siguiente.",
          empatico: "Necesito descanso. Si me escribes tarde, te responder√© ma√±ana."
        },
        invade: {
          neutral:  "No comparto contrase√±as ni acceso a mis cuentas. Si se insiste, cortar√© la conversaci√≥n.",
          firme:    "No permitir√© invasi√≥n de mi privacidad. No compartir√© contrase√±as ni accesos.",
          empatico: "Para sentirme seguro, necesito privacidad. No compartir√© contrase√±as ni acceso."
        },
        promesas: {
          neutral:  "Cuando hay promesas que no se cumplen, replanteo mi participaci√≥n. Necesito hechos consistentes.",
          firme:    "Si las promesas no se cumplen repetidamente, me apartar√© de esos acuerdos.",
          empatico: "Me frustra cuando lo acordado no se cumple. Necesito consistencia para seguir."
        }
      };
      var s = document.getElementById('b-situation');
      var t = document.getElementById('b-tone');
      var out = document.getElementById('b-output');
      var card = document.getElementById('tool-boundaries');

      function gen(){
        out.value = (TEMPLATES[s.value] && TEMPLATES[s.value][t.value]) || '';
      }
      document.getElementById('b-generate').addEventListener('click', gen);
      document.getElementById('b-copy').addEventListener('click', function(){
        out.select(); document.execCommand('copy');
        var ok = document.getElementById('b-copied'); ok.style.display='inline';
        setTimeout(function(){ ok.style.display='none'; }, 1400);
      });
      document.getElementById('b-print').addEventListener('click', function(){
        // Crea bloque de impresi√≥n solo con el texto generado
        var tmp = document.createElement('div');
        tmp.innerHTML = '<h3>L√≠mite generado</h3><p style="white-space:pre-wrap">'+(out.value||'(Sin contenido)')+'</p>';
        card.appendChild(tmp);
        printOnly(card);
        setTimeout(function(){ card.removeChild(tmp); }, 300);
      });
      gen();
    })();

    // ---------- 3) D√çAS ----------
    (function(){
      var key = 'sa_streak_start';
      var startInput = document.getElementById('s-start');
      var daysEl = document.getElementById('s-days');
      var phrase = document.getElementById('s-phrase');
      var kudos = document.getElementById('s-kudos');
      var card = document.getElementById('tool-streak');

      function load(){
        var stored = localStorage.getItem(key);
        if (stored) startInput.value = stored;
        update();
      }
      function update(){
        var v = startInput.value;
        if (!v){ daysEl.textContent = '0'; phrase.textContent=''; kudos.innerHTML=''; return; }
        var d0 = new Date(v+'T00:00:00');
        var now = new Date();
        var diff = Math.floor((now - d0) / (1000*60*60*24));
        if (diff < 0) diff = 0;
        daysEl.textContent = diff;
        phrase.textContent = diff>=1 ? '¬°Sigue as√≠!' : 'Selecciona una fecha de inicio.';
        renderBadges(diff);
      }
      function renderBadges(n){
        var milestones = [1,3,7,14,21,30,60,90];
        kudos.innerHTML = milestones.filter(function(m){ return n>=m; })
          .map(function(m){ return '<span class="badge">üéâ ' + m + ' d√≠a' + (m>1?'s':'') + '</span>'; })
          .join('');
      }
      document.getElementById('s-save').addEventListener('click', function(){
        if (startInput.value){ localStorage.setItem(key, startInput.value); update(); }
      });
      document.getElementById('s-reset').addEventListener('click', function(){
        localStorage.removeItem(key); startInput.value=''; update();
      });
      document.getElementById('s-print').addEventListener('click', function(){
        // Imprime solo este bloque con datos clave
        var tmp = document.createElement('div');
        tmp.innerHTML = '<h3>Progreso de d√≠as</h3>'
          + '<p>Fecha de inicio: '+(startInput.value||'(sin fecha)')+'</p>'
          + '<p>D√≠as acumulados: '+(daysEl.textContent||'0')+'</p>';
        card.appendChild(tmp);
        printOnly(card);
        setTimeout(function(){ card.removeChild(tmp); }, 300);
      });
      startInput.addEventListener('change', update);
      load();
    })();

    // ---------- 4) RESPIRACI√ìN ----------
    (function(){
      var box = document.getElementById('br-box');
      var phaseEl = document.getElementById('br-phase');
      var timer = null;
      var i = 0; // 0=inhala,1=mant√©n,2=exhala
      var secs = 4, remain = 4;

      function setPhase(p){
        i = p; remain = secs;
        var label = (i===0?'Inhala': i===1?'Mant√©n':'Exhala');
        phaseEl.textContent = label;
        box.style.transform = (i===0?'scale(1.06)': i===1?'scale(1.06)':'scale(0.94)');
      }
      function tick(){
        box.textContent = remain;
        remain--;
        if (remain < 0){
          setPhase((i+1)%3);
        }
      }
      function start(){
        stop(); setPhase(0); tick();
        timer = setInterval(tick, 1000);
      }
      function stop(){
        if (timer) clearInterval(timer);
        timer = null; box.textContent = '4'; phaseEl.textContent = 'Inhala'; box.style.transform='scale(1)';
      }
      document.getElementById('br-start').addEventListener('click', start);
      document.getElementById('br-stop').addEventListener('click', stop);
    })();
  </script>
</body>
</html>




